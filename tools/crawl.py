#!/usr/bin/env python

import sys
import argparse
import requests

HABITAT_CODES = [
    '8330', '1110', '1130', '1140', '1160', '1170', '1180', '1210', '1150',
    '8310', '7150', '7210', '7110', '7120', '7220', '7230', '7140', '7240',
    '4070', '9410', '91X0', '9260', '9530', '92D0', '9420', '92A0', '91F0',
    '91E0', '91H0', '91D0', '91AA', '91Q0', '9170', '9110', '9130', '9150',
    '91K0', '91V0', '9180', '4080', '91M0', '91I0', '91Y0', '91L0', '4030',
    '4060', '40C0', '40A0', '8120', '8220', '8110', '8160', '8210', '8230',
    '1530']


SPECIES_CODES = [
    '1248', '1251', '1256', '1261', '1263', '1276', '1277', '1278', '1279',
    '1281', '1283', '1292', '1295', '1298', '1302', '1303', '1304', '1305',
    '1101', '1166', '1188', '1193', '1197', '1200', '1201', '1203', '1209',
    '1210', '1212', '1213', '1214', '1217', '1219', '1220', '1516', '1528',
    '1725', '1758', '1762', '1763', '1614', '1617', '1657', '1689', '1306',
    '1307', '1308', '1309', '1310', '1312', '1313', '1314', '1316', '1317',
    '1318', '1321', '1322', '1323', '1324', '1326', '1327', '1328', '1329',
    '1330', '1331', '1332', '1335', '1337', '1339', '1341', '1342', '1343',
    '1349', '1350', '1351', '1352', '1353', '1354', '1355', '1356', '1357',
    '1358', '1361', '1363', '1369', '1379', '1381', '1386', '1389', '1393',
    '1400', '1409', '1428', '1437', '1477', '2633', '2635', '2647', '4008',
    '1866', '1898', '1902', '1903', '1939', '1993', '2001', '2016', '2021',
    '2079', '2093', '2097', '2113', '2120', '2125', '2132', '2170', '2186',
    '2191', '2236', '2253', '2255', '2285', '2300', '2318', '2327', '2488',
    '2489', '2609', '2612', '4066', '4067', '4068', '4070', '4074', '4081',
    '4087', '4091', '4096', '4097', '4098', '4116', '4121', '4122', '4125',
    '4127', '5037', '5040', '5365']


def test(url):
    print url
    resp = requests.get(url)
    assert resp.status_code == 200
    assert ('cod: ' + code) in resp.text


def main():
    parser = argparse.ArgumentParser()
    parser.add_argument('urlbase')
    args = parser.parse_args()
    urlbase = args.urlbase.rstrip('/') + '/'

    for code in HABITAT_CODES:
        test(urlbase + 'habitate/?habitat=' + code)

    for code in SPECIES_CODES:
        test(urlbase + 'specii/?species=' + code)


if __name__ == '__main__':
    main()
