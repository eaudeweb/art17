{% extends "layout.html" %}


{% block content %}
<form class="speciesfilter">
  <fieldset>
    <legend>Filtrare specii</legend>

    <label>
      Grup
      <select name="group">
        <option value="">--</option>
        {% for group in species_groups %}
          {% set selected = (group == current_group) %}
          <option value="{{ group.code }}"
                  {%- if selected %} selected{% endif %}>
            {{- group.description -}}
          </option>
        {% endfor %}
      </select>
    </label>

    <label>
      Specie
      <select name="species">
        <option value="">--</option>
        {% for species in species_list %}
          {% set selected = (species == current_species) %}
          <option value="{{ species.speciescode }}"
                  {%- if selected %} selected{% endif %}>
            {{- species.speciesname -}}
          </option>
        {% endfor %}
      </select>
    </label>
  </fieldset>
</form>

Cod: {{ code }}<br>
Nume: {{ name }}<br>
Anexa II: {{ annex_II }}<br>
Anexa IV: {{ annex_IV }}<br>
Anexa V: {{ annex_V }}<br>

<hr>

{% for row in records %}
<p>
  Bio-regiunea: {{ row.region }}<br>

  Range:<br>
  {% set range = row.range %}
  -- method: {{ range.method }}<br>
  -- surface: {{ range.surface_area }}<br>
  -- assessment: {{ range.conclusion }}<br>
  -- trend: {{ range.trend }}<br>
  -- reference value: {{ range.reference_value }}<br>

  Population:<br>
  {% set population = row.population %}
  -- size &amp; unit: {{ population.size_and_unit }}<br>
  -- assessment: {{ population.conclusion }}<br>
  -- short term trend: {{ population.trend_short }}<br>
  -- long term trend: {{ population.trend_long }}<br>
  -- reference value: {{ population.reference_value }}<br>

  Habitat:<br>
  {% set habitat = row.habitat %}
  -- method: {{ habitat.method }}<br>
  -- surface: {{ habitat.surface_area }}<br>
  -- assessment: {{ habitat.conclusion }}<br>
  -- short term trend: {{ habitat.trend_short }}<br>
  -- long term trend: {{ habitat.trend_long }}<br>
  -- suitable: {{ habitat.area_suitable }}<br>
  -- quality: {{ habitat.quality }}<br>

  Future prospects: {{ row.future_prospects }}<br>
  Overall assessment: {{ row.overall_assessment }}<br>

</p>
{% endfor %}
{% endblock content %}


{% block styles %}
  {% from 'bits.html' import link %}
  {{ link('lib/select2-3.4.2/select2.css') }}
{% endblock styles %}


{% block script %}
  {% from 'bits.html' import script %}
  {{ script('lib/jquery-1.10.2/jquery.min.js') }}
  {{ script('lib/select2-3.4.2/select2.min.js') }}
  {{ script('lib/select2-3.4.2/select2_locale_ro.js') }}

  <script>
    (function() {
      var speciesfilter = $('.speciesfilter');

      speciesfilter.find('select').change(function() {
        speciesfilter.submit();
      });

      speciesfilter.find('select[name=species]').select2({width: '25em'});
    })();
  </script>
{% endblock script %}
