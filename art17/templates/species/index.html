{% extends "layout.html" %}


{% block content %}
<form class="speciesfilter">
  <fieldset>
    <legend>Filtrare specii</legend>

    <label>
      Grup
      <select name="group">
        <option>--</option>
        {% for group in species_groups %}
          <option value="{{ group.code }}">{{ group.description }}</option>
        {% endfor %}
      </select>
    </label>
  </fieldset>
</form>

<ul>
{% for row in records %}
  {% set speciescode = row.speciescode %}
  {% set url = url_for('.species_view', speciescode=speciescode) %}
  <li><a href="{{ url }}">{{ speciescode }}</a></li>
{% endfor %}
</ul>
{% endblock content %}


{% block script %}
  {% from 'bits.html' import script_lib %}
  {{ script_lib('jquery-1.10.2/jquery.min.js') }}

  <script>
    (function() {
      var speciesfilter = $('.speciesfilter');

      speciesfilter.find('select').change(function() {
        speciesfilter.submit();
      });
    })();
  </script>
{% endblock script %}
