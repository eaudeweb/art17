{%- from 'common/td.html'
    import conclusion_td, reference_value_td, trend_td,
           population_size_td, habitat_quality_td
    with context %}

<table class="records">
  <tr class="records-header">
    <td rowspan=2></td>
    <td rowspan=2 title="Regiunea biogeografică">Regiune</td>
    <td colspan=5>Areal (km<sup>2</sup>)</td>
    <td colspan=5>Populație</td>
    <td colspan=7>Habitat pentru specie (km<sup>2</sup>)</td>
    <td rowspan=2
        title="Perspective (referitoare la populație, areal și
               disponibilitatea habitatului)"
        >Perspective</td>
    <td rowspan=2
        title="Evaluare generală a statutului de conservare"
        >Evaluare generală</td>
  </tr>

  <tr class="records-header">
    {#- detail #}
    {#- bio-regiune #}
    {#- range: 5 cols #}
    <td>Metodă</td>
    <td>Suprafață</td>
    <td>Concluzie</td>
    <td>Tendință</td>
    <td title="Arealul favorabil de referință">Referință</td>
    {#- population: 5 cols #}
    <td title="Mărimea populației și unitatea de măsură">Mărime</td>
    <td>Concluzie</td>
    <td>Tendință pe termen scurt</td>
    <td>Tendință pe termen lung</td>
    <td title="Populația favorabilă de referință">Referință</td>
    {#- habitat: 7 cols #}
    <td>Metodă</td>
    <td>Suprafață</td>
    <td>Concluzie</td>
    <td>Tendință pe termen scurt</td>
    <td>Tendință pe termen lung</td>
    <td title="Zona de referință favorabilă">Referință</td>
    <td>Calitate</td>
    {#- future prospects #}
    {#- overall assessment #}
  </tr>

 {% for row in species.records %}
  <tr>
    {#- detail #}
    <td>
      {%- set url = url_for('.detail', record_id=row.id) %}
      <button class="records-detailbtn" data-url="{{ url }}">info</button>

      {%- set url = url_for('.comment', record_id=row.id) %}
      <button class="records-commentbtn" data-url="{{ url }}">comentariu</button>
    </td>

    {#- bio-regiune #}
    <td>{{ row.region }}</td>

    {#- range: 5 cols #}
    {%- set range = row.range %}
    <td>{{ range.method }}</td>
    <td>{{ range.surface_area }}</td>
    {{ conclusion_td(range.conclusion) }}
    {{ trend_td(range.trend_short) }}
    {{ reference_value_td(range.reference_value) }}

    {#- population: 5 cols #}
    {%- set population = row.population %}
    {{ population_size_td(population.size) }}
    {{ conclusion_td(population.conclusion) }}
    {{ trend_td(population.trend_short) }}
    {{ trend_td(population.trend_long) }}
    {{ reference_value_td(population.reference_value) }}

    {#- habitat: 7 cols #}
    {%- set habitat = row.habitat %}
    <td>{{ habitat.method }}</td>
    <td>{{ habitat.surface_area }}</td>
    {{ conclusion_td(habitat.conclusion) }}
    {{ trend_td(habitat.trend_short) }}
    {{ trend_td(habitat.trend_long) }}
    <td>{{ habitat.area_suitable }}</td>
    {{ habitat_quality_td(habitat.quality) }}

    {#- future prospects #}
    {{ conclusion_td(row.future_prospects) }}

    {#- overall assessment #}
    {{ conclusion_td(row.overall_assessment) }}
  </tr>
 {% endfor %}
</table>


{% include 'common/recorddetail.html' %}

{% include 'common/recordcomment.html' %}
