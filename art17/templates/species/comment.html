{% extends "layout.html" %}
{% from 'common/comment_bits.html' import error_cls, errors %}


{% block title %}
  {%- if species %}{{ species.name }} &mdash; {% endif %}
  {{- super() }}
{%- endblock title %}


{% block breadcrumbs %}
  {%- from 'bits.html' import breadcrumbs %}
  {{ breadcrumbs([
          ('acasǎ', url_for('views.home')),
          ('specii', next_url or url_for('.index')),
          ('comentariu', None),
      ]) }}
{% endblock breadcrumbs %}


{% block content %}
{%- from 'common/td.html' import
    range_html, trend_detail_html, reference_value_html, period_html,
    population_size_html, method_html, conclusions_html, habitat_quality_html
    with context %}

  <h2>
    Adaugǎ comentariu pentru
    <em>{{ species.lu.speciesname }}</em> in regiunea
    <em>{{ record.region.nume }}</em>
  </h2>

  <form method="post">
    {%- if not config.TESTING %}
    <p class="comment-info">
      Toate câmpurile sunt opționale. Valorile originale sunt prezentate in
      partea dreaptǎ a acestei pagini în font gri.

      Aceste câmpuri și valorile lor sunt conforme cu
      <a href="{{ url_for('views.guide') }}" target="_blank">
        ghidul de raportare</a>
      al Comisiei Europene.
    </p>
    {%- endif %}

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Areal</h3>
      </div>

      <div class="panel-body">
        <div class="form-group">
          <label for="range.surface_area">
            Suprafață (km²)
          </label>

          {{ errors(form.range.surface_area) }}

          <div class="row">
            <div class="col-sm-4 {{- error_cls(form.range.surface_area) }}">
              {{ form.range.surface_area(class='form-control',
                      placeholder="suprafața trebuie exprimatǎ in km²") }}
            </div>

            <div class="col-sm-2"></div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- range_html(record.range) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="range.method">
            Metoda utilizată - suprafața arealului
          </label>

          {{ errors(form.range.method) }}

          <div class="row">
            <div class="col-sm-6 {{- error_cls(form.range.method) }}">
              {{ form.range.method(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- method_html(record.range.method) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set trend_short = form.range.trend_short %}
          <label for="range.trend_short.trend">
            Tendință pe termen scurt
          </label>

          {{ errors(trend_short) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(trend_short.trend) }}">
              {{ trend_short.trend(class='form-control') }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_short.period.start) }}">
              {{ trend_short.period.start(class='form-control',
                      placeholder="an de început") }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_short.period.end) }}">
              {{ trend_short.period.end(class='form-control',
                      placeholder="an de sfârșit") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- trend_detail_html(record.range.trend_short) }}
                {{- period_html(record.range.trend_short.period) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set trend_long = form.range.trend_long %}
          <label for="range.trend_long.trend">
            Tendință pe termen lung
          </label>

          {{ errors(trend_long) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(trend_long.trend) }}">
              {{ trend_long.trend(class='form-control') }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_long.period.start) }}">
              {{ trend_long.period.start(class='form-control',
                      placeholder="an de început") }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_long.period.end) }}">
              {{ trend_long.period.end(class='form-control',
                      placeholder="an de sfârșit") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- trend_detail_html(record.range.trend_long) }}
                {{- period_html(record.range.trend_long.period) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set reference_value = form.range.reference_value %}
          <label for="range.reference_value.op">
            Arealul favorabil de referință
          </label>

          {{ errors(reference_value) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(reference_value.op) }}">
              {{ reference_value.op(class='form-control') }}
            </div>

            <div class="col-sm-4 {{- error_cls(reference_value.number) }}">
              {{ reference_value.number(class='form-control',
                      placeholder="suprafața trebuie exprimatǎ in km²") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- reference_value_html(record.range.reference_value,
                        unit='km²') -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="range.reference_value.method">
            Arealul favorabil de referință - metoda
          </label>

          {{ errors(form.range.reference_value.method) }}

          <div class="row">
            <div class="col-sm-6 {{- error_cls(form.range.reference_value.method) }}">
              {{ form.range.reference_value.method(class='form-control', rows=2) }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- record.range.reference_value.method -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set conclusion = form.range.conclusion %}
          <label for="range.conclusion.value">
            Concluzie
          </label>

          {{ errors(conclusion) }}

          <div class="row">
            <div class="col-sm-3 {{- error_cls(conclusion.value) }}">
              {{ conclusion.value(class='form-control') }}
            </div>

            <div class="col-sm-3 {{- error_cls(conclusion.trend) }}">
              {{ conclusion.trend(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- conclusions_html(record.range.conclusion) -}}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Populație</h3>
      </div>

      <div class="panel-body">
        <div class="form-group">
          {%- set population = form.population.size.population %}
          <label for="population.size.population.unit">
            Estimarea mărimii populației
          </label>

          {{ errors(population) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(population.unit) }}">
              {{ population.unit(class='form-control') }}
            </div>

            <div class="col-sm-2 {{- error_cls(population.min) }}">
              {{ population.min(class='form-control',
                      placeholder="numǎr minim") }}
            </div>

            <div class="col-sm-2 {{- error_cls(population.max) }}">
              {{ population.max(class='form-control',
                      placeholder="numǎr maxim") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- population_size_html(record.population.size) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set population_alt = form.population.size.population_alt %}

          {{ errors(population_alt) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(population_alt.unit) }}">
              {{ population_alt.unit(class='form-control') }}
            </div>

            <div class="col-sm-2 {{- error_cls(population_alt.min) }}">
              {{ population_alt.min(class='form-control',
                      placeholder="numǎr minim") }}
            </div>

            <div class="col-sm-2 {{- error_cls(population_alt.max) }}">
                {{ population_alt.max(class='form-control',
                      placeholder="numǎr maxim") }}
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="population.method">
            Metoda utilizată - mărimea populației
          </label>

          {{ errors(form.population.method) }}

          <div class="row">
            <div class="col-sm-6 {{- error_cls(form.population.method) }}">
              {{ form.population.method(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- method_html(record.population.method) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set trend_short = form.population.trend_short %}
          <label for="population.trend_short.trend">
            Tendință pe termen scurt
          </label>

          {{ errors(trend_short) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(trend_short.trend) }}">
              {{ trend_short.trend(class='form-control') }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_short.period.start) }}">
              {{ trend_short.period.start(class='form-control',
                      placeholder="an de început") }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_short.period.end) }}">
              {{ trend_short.period.end(class='form-control',
                      placeholder="an de sfǎrșit") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- trend_detail_html(record.population.trend_short) }}
                {{- period_html(record.population.trend_short.period) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set trend_long = form.population.trend_long %}
          <label for="population.trend_long.trend">
            Tendință pe termen lung
          </label>

          {{ errors(trend_long) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(trend_long.trend) }}">
              {{ trend_long.trend(class='form-control') }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_long.period.start) }}">
              {{ trend_long.period.start(class='form-control',
                      placeholder="an de început") }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_long.period.end) }}">
              {{ trend_long.period.end(class='form-control',
                      placeholder="an de sfǎrșit") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- trend_detail_html(record.population.trend_long) }}
                {{- period_html(record.population.trend_long.period) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set reference_value = form.population.reference_value %}
          <label for="population.reference_value.op">
            Populația favorabilă de referință
          </label>

          {{ errors(reference_value) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(reference_value.op) }}">
              {{ reference_value.op(class='form-control') }}
            </div>

            <div class="col-sm-4 {{- error_cls(reference_value.number) }}">
              {{ reference_value.number(class='form-control',
                      placeholder="numărul de indivizi sau unitățile utilizate") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- reference_value_html(record.population.reference_value,
                        unit='km²') -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="population.reference_value.method">
            Populația favorabilă de referință - metoda
          </label>

          {{ errors(form.population.reference_value.method) }}

          <div class="row">
            <div class="col-sm-6 {{- error_cls(form.population.reference_value.method) }}">
              {{ form.population.reference_value.method(class='form-control', rows=2) }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- record.population.reference_value.method -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set conclusion = form.population.conclusion %}
          <label for="population.conclusion.value">
            Concluzie
          </label>

          {{ errors(conclusion) }}

          <div class="row">
            <div class="col-sm-3 {{- error_cls(conclusion.value) }}">
              {{ conclusion.value(class='form-control') }}
            </div>

            <div class="col-sm-3 {{- error_cls(conclusion.trend) }}">
              {{ conclusion.trend(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- conclusions_html(record.population.conclusion) -}}
              </span>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Habitat</h3>
      </div>

      <div class="panel-body">
        <div class="form-group">
          <label for="habitat.surface_area">
            Suprafață (km²)
          </label>

          {{ errors(form.habitat.surface_area) }}

          <div class="row">
            <div class="col-sm-4 {{- error_cls(form.habitat.surface_area) }}">
              {{ form.habitat.surface_area(class='form-control',
                      placeholder="suprafața trebuie exprimatǎ in km²") }}
            </div>

            <div class="col-sm-2"></div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- range_html(record.habitat) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="habitat.date">
            Anul/perioada
          </label>

          {{ errors(form.habitat.date) }}

          <div class="row">
            <div class="col-sm-4 {{- error_cls(form.habitat.date) }}">
              {{ form.habitat.date(class='form-control',
                      placeholder="an sau perioadǎ") }}
            </div>

            <div class="col-sm-2"></div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- record.habitat.date -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="habitat.method">
            Metoda utilizată - habitatul speciei
          </label>

          {{ errors(form.habitat.method) }}

          <div class="row">
            <div class="col-sm-6 {{- error_cls(form.habitat.method) }}">
              {{ form.habitat.method(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- method_html(record.habitat.method) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="habitat.quality">
            Calitatea habitatului
          </label>

          {{ errors(form.habitat.quality) }}

          <div class="row">
            <div class="col-sm-6 {{- error_cls(form.habitat.quality) }}">
              {{ form.habitat.quality(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- habitat_quality_html(record.habitat.quality) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="habitat.quality_explanation">
            Calitatea habitatului - metoda
          </label>

          {{ errors(form.habitat.quality_explanation) }}

          <div class="row">
            <div class="col-sm-6 {{- error_cls(form.habitat.quality_explanation) }}">
              {{ form.habitat.quality_explanation(class='form-control', rows=2) }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- record.habitat.quality_explanation -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set trend_short = form.habitat.trend_short %}
          <label for="habitat.trend_short.trend">
            Tendință pe termen scurt
          </label>

          {{ errors(trend_short) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(trend_short.trend) }}">
              {{ trend_short.trend(class='form-control') }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_short.period.start) }}">
              {{ trend_short.period.start(class='form-control',
                      placeholder="an de inceput") }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_short.period.end) }}">
              {{ trend_short.period.end(class='form-control',
                      placeholder="an de sfǎrșit") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- trend_detail_html(record.habitat.trend_short) }}
                {{- period_html(record.habitat.trend_short.period) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set trend_long = form.habitat.trend_long %}
          <label for="habitat.trend_long.trend">
            Tendință pe termen lung
          </label>

          {{ errors(trend_long) }}

          <div class="row">
            <div class="col-sm-2 {{- error_cls(trend_long.trend) }}">
              {{ trend_long.trend(class='form-control') }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_long.period.start) }}">
              {{ trend_long.period.start(class='form-control',
                      placeholder="an de inceput") }}
            </div>

            <div class="col-sm-2 {{- error_cls(trend_long.period.end) }}">
              {{ trend_long.period.end(class='form-control',
                      placeholder="an de sfǎrșit") }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- trend_detail_html(record.habitat.trend_long) }}
                {{- period_html(record.habitat.trend_long.period) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="habitat.area_suitable">
            Suprafața de habitat adecvată pentru specie (km²)
          </label>

          {{ errors(form.habitat.area_suitable) }}

          <div class="row">
            <div class="col-sm-4 {{- error_cls(form.habitat.area_suitable) }}">
              {{ form.habitat.area_suitable(class='form-control',
                      placeholder="suprafața trebuie exprimatǎ in km²") }}
            </div>

            <div class="col-sm-2"></div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- range_html(record.habitat.area_suitable) -}}
              </span>
            </div>
          </div>
        </div>

        <div class="form-group">
          {%- set conclusion = form.habitat.conclusion %}
          <label for="habitat.conclusion.value">
            Concluzie
          </label>

          {{ errors(conclusion) }}

          <div class="row">
            <div class="col-sm-3 {{- error_cls(conclusion.value) }}">
              {{ conclusion.value(class='form-control') }}
            </div>

            <div class="col-sm-3 {{- error_cls(conclusion.trend) }}">
              {{ conclusion.trend(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- conclusions_html(record.habitat.conclusion) -}}
              </span>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Concluzii</h3>
      </div>

      <div class="panel-body">
        <div class="form-group">
          {%- set future_prospects = form.future_prospects %}
          <label for="future_prospects.value">
            Perspective viitoare
          </label>

          {{ errors(future_prospects) }}

          <div class="row">
            <div class="col-sm-3 {{- error_cls(future_prospects.value) }}">
              {{ future_prospects.value(class='form-control') }}
            </div>

            <div class="col-sm-3 {{- error_cls(future_prospects.trend) }}">
              {{ future_prospects.trend(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- conclusions_html(record.future_prospects) -}}
              </span>
            </div>
          </div>

        <div class="form-group">
          {%- set overall_assessment = form.overall_assessment %}
          <label for="overall_assessment.value">
            Evaluare generală a stării de conservare
          </label>

          {{ errors(overall_assessment) }}

          <div class="row">
            <div class="col-sm-3 {{- error_cls(overall_assessment.value) }}">
              {{ overall_assessment.value(class='form-control') }}
            </div>

            <div class="col-sm-3 {{- error_cls(overall_assessment.trend) }}">
              {{ overall_assessment.trend(class='form-control') }}
            </div>

            <div class="col-sm-6 text-primary">
              <span class="recordvalue label label-default">
                {{- conclusions_html(record.overall_assessment) -}}
              </span>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

      <div class="form-group">
        <button type="submit" class="btn btn-primary">Save</button>
      </div>


    {%- if next_url %}
      <input type="hidden" name="next" value="{{ next_url }}">
    {%- endif %}

  </form>
{% endblock content %}
