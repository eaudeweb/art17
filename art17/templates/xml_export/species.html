{% macro to_bool(val) %}
    {%- if val -%}
        true
    {%- else -%}
        false
    {%- endif -%}
{% endmacro -%}

<?xml version="1.0" encoding="utf-8"?>
<species_reports xml:lang="en" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://bd.eionet.europa.eu/schemas/Art12Art17_reporting_2013/art17_species.xsd">
    {%- for species in species_list %}
    <species_report>
        <country isocode="RO" desc="Romania">RO</country>
        <speciescode euniscode="{{ species.checklist.eunis_code }}">{{ species.code }}</speciescode>
        <speciesname>{{ species.lu.speciesname }}</speciesname>
        <alternative_speciesname>{{ species.alternative_speciesname }}</alternative_speciesname>
        <common_speciesname>{{ species.common_speciesname }}</common_speciesname>
        <distribution_map>{{ to_bool(species.distribution_map) }}</distribution_map>
        <sensitive_species>{{ to_bool(species.sensitive_species) }}</sensitive_species>
        <distribution_method desc="{{ species.lu_method.name }}">{{ species.distribution_method }}</distribution_method>
        <distribution_date>{{ species.distribution_date }}</distribution_date>
        <additional_distribution_map>{{ to_bool(species.additional_distribution_map) }}</additional_distribution_map>
        <range_map>{{ to_bool(species.range_map) }}</range_map>
        <regional>
        {%- for region in species.regions.filter_by(cons_dataset_id=1) %}
            <region>
                <code desc="{{ region.lu.name }}">{{ region.region }}</code>
                <published>{{ region.published }}</published>
                <range_surface_area>{{ region.range_surface_area }}</range_surface_area>
                <range_method>{{ region.range_method }}</range_method>
                <range_trend_period>{{ region.range_trend_period }}</range_trend_period>
                <range_trend>{{ region.range_trend }}</range_trend>
                <range_trend_magnitude_min>{{ region.range_trend_magnitude_min }}</range_trend_magnitude_min>
                <range_trend_magnitude_max>{{ region.range_trend_magnitude_max }}</range_trend_magnitude_max>
                <range_trend_long_period>{{ region.range_trend_long_period }}</range_trend_long_period>
                <range_trend_long>{{ region.range_trend_long }}</range_trend_long>
                <range_trend_long_magnitude_min>{{ region.range_trend_long_magnitude_min }}</range_trend_long_magnitude_min>
                <range_trend_long_magnitude_max>{{ region.range_trend_long_magnitude_max }}</range_trend_long_magnitude_max>
                <complementary_favourable_range>{{ region.complementary_favourable_range }}</complementary_favourable_range>
                <complementary_favourable_range_op>{{ region.complementary_favourable_range_op }}</complementary_favourable_range_op>
                <complementary_favourable_range_unknown>{{ to_bool(region.complementary_favourable_range_x) }}</complementary_favourable_range_unknown>
                <complementary_favourable_range_method>{{ region.complementary_favourable_range_method }}</complementary_favourable_range_method>
                <range_reasons_for_change_a>{{ region.range_reasons_for_change_a }}</range_reasons_for_change_a>
                <range_reasons_for_change_b>{{ region.region.range_reasons_for_change_b }}</range_reasons_for_change_b>
                <range_reasons_for_change_c>{{ region.range_reasons_for_change_c }}</range_reasons_for_change_c>
                <population_size_unit>{{ region.population_size_unit }}</population_size_unit>
                <population_minimum_size>{{ region.population_minimum_size }}</population_minimum_size>
                <population_maximum_size>{{ region.population_maximum_size }}</population_maximum_size>
                <population_alt_size_unit>{{ region.population_alt_size_unit }}</population_alt_size_unit>
                <population_alt_minimum_size>{{ region.population_alt_minimum_size }}</population_alt_minimum_size>
                <population_alt_maximum_size>{{ region.population_alt_maximum_size }}</population_alt_maximum_size>
                <population_additional_locality>{{ region.population_additional_locality }}</population_additional_locality>
                <population_additional_method>{{ region.population_additional_method }}</population_additional_method>
                <population_additional_problems>{{ region.population_additional_problems }}</population_additional_problems>
                <population_date>{{ region.population_date }}</population_date>
                <population_method>{{ region.population_method }}</population_method>
                <population_trend_period>{{ region.population_trend_period }}</population_trend_period>
                <population_trend>{{ region.population_trend }}</population_trend>
                <population_trend_magnitude_min>{{ region.population_trend_magnitude_min }}</population_trend_magnitude_min>
                <population_trend_magnitude_max>{{ region.population_trend_magnitude_max }}</population_trend_magnitude_max>
                <population_trend_magnitude_ci>{{ region.population_trend_magnitude_ci }}</population_trend_magnitude_ci>
                <population_trend_method>{{ region.population_trend_method }}</population_trend_method>
                <population_trend_long_period>{{ region.population_trend_long_period }}</population_trend_long_period>
                <population_trend_long>{{ region.population_trend_long }}</population_trend_long>
                <population_trend_long_magnitude_min>{{ region.population_trend_long_magnitude_min }}</population_trend_long_magnitude_min>
                <population_trend_long_magnitude_max>{{ region.population_trend_long_magnitude_max }}</population_trend_long_magnitude_max>
                <population_trend_long_magnitude_ci>{{ region.population_trend_long_magnitude_ci }}</population_trend_long_magnitude_ci>
                <population_trend_long_method>{{ region.population_trend_long_method }}</population_trend_long_method>
                <complementary_favourable_population>{{ region.complementary_favourable_population }}</complementary_favourable_population>
                <complementary_favourable_population_op>{{ region.complementary_favourable_population_op }}</complementary_favourable_population_op>
                <complementary_favourable_population_unknown>{{ to_bool(region.complementary_favourable_population_x) }}</complementary_favourable_population_unknown>
                <complementary_favourable_population_method>{{ region.complementary_favourable_population_method }}</complementary_favourable_population_method>
                <population_reasons_for_change_a>{{ to_bool(region.population_reasons_for_change_a) }}</population_reasons_for_change_a>
                <population_reasons_for_change_b>{{ to_bool(region.population_reasons_for_change_b) }}</population_reasons_for_change_b>
                <population_reasons_for_change_c>{{ to_bool(region.population_reasons_for_change_c) }}</population_reasons_for_change_c>
                <habitat_surface_area>{{ region.habitat_surface_area }}</habitat_surface_area>
                <habitat_date>{{ region.habitat_date }}</habitat_date>
                <habitat_method>{{ region.habitat_method }}</habitat_method>
                <habitat_quality>{{ region.habitat_quality }}</habitat_quality>
                <habitat_quality_explanation>{{ region.habitat_quality_explanation }}</habitat_quality_explanation>
                <habitat_trend_period>{{ region.habitat_trend_period }}</habitat_trend_period>
                <habitat_trend>{{ region.habitat_trend }}</habitat_trend>
                <habitat_trend_long_period>{{ region.habitat_trend_long_period }}</habitat_trend_long_period>
                <habitat_trend_long>{{ region.habitat_trend_long }}</habitat_trend_long>
                <habitat_area_suitable>{{ region.habitat_area_suitable }}</habitat_area_suitable>
                <habitat_reasons_for_change_a>{{ to_bool(region.habitat_reasons_for_change_a) }}</habitat_reasons_for_change_a>
                <habitat_reasons_for_change_b>{{ to_bool(region.habitat_reasons_for_change_b) }}</habitat_reasons_for_change_b>
                <habitat_reasons_for_change_c>{{ to_bool(region.habitat_reasons_for_change_c) }}</habitat_reasons_for_change_c>
                <pressures>
                {%- for pressure in region.get_pressures() %}
                    <pressure>
                        <code>{{ pressure.lu.code }}</code>
                        <ranking>{{ pressure.ranking }}</ranking>
                        <pollution_qualifiers>
                            {%- for pollution in pressure.pollutions %}
                            <pollution_qualifier>{{ pollution.pollution_qualifier }}</pollution_qualifier>
                            {%- endfor %}
                        </pollution_qualifiers>
                    <pressure>
                {%- endfor %}
                </pressures>
                <pressures_method>{{ region.pressures_method }}</pressures_method>
                <threats>
                {%- for threat in region.get_threats() %}
                    <threat>
                        <code>{{ threat.lu.code }}</code>
                        <ranking>{{ threat.ranking }}</ranking>
                        <pollution_qualifiers>
                            {%- for pollution in threat.pollutions %}
                            <pollution_qualifier>{{ pollution.pollution_qualifier }}</pollution_qualifier>
                            {%- endfor %}
                        </pollution_qualifiers>
                    </threat>
                {%- endfor %}
                </threats>
                <threats_method>{{ region.threats_method }}</threats_method>
                <justification>{{ region.justification }}</justification>
                <other_relevant_information>{{ region.other_relevant_information }}</other_relevant_information>
                <transboundary_assessment>{{ region.transboundary_assessment }}</transboundary_assessment>
                <conclusion_range>{{ region.conclusion_range }}</conclusion_range>
                <conclusion_range_trend>{{ region.conclusion_range_trend }}</conclusion_range_trend>
                <conclusion_population>{{ region.conclusion_population }}</conclusion_population>
                <conclusion_population_trend>{{ region.conclusion_population_trend }}</conclusion_population_trend>
                <conclusion_habitat>{{ region.conclusion_habitat }}</conclusion_habitat>
                <conclusion_habitat_trend>{{ region.conclusion_habitat_trend }}</conclusion_habitat_trend>
                <conclusion_future>{{ region.conclusion_future }}</conclusion_future>
                <conclusion_future_trends>{{ region.conclusion_future_trend }}</conclusion_future_trends>
                <conclusion_assessment>{{ region.conclusion_assessment }}</conclusion_assessment>
                <conclusion_assessment_trend>{{ region.conclusion_assessment_trend }}</conclusion_assessment_trend>
                <natura2000_population_unit>{{ region.natura2000_population_unit }}</natura2000_population_unit>
                <natura2000_population_min>{{ region.natura2000_population_min }}</natura2000_population_min>
                <natura2000_population_max>{{ region.natura2000_population_max }}</natura2000_population_max>
                <natura2000_population_method>{{ region.natura2000_population_method }}</natura2000_population_method>
                <natura2000_population_trend>{{ region.natura2000_population_trend }}</natura2000_population_trend>
                <measures>
                {%- for measure in region.measures %}
                    <measure>
                        <code>{{ measure.lu.code }}</code>
                        <type_legal>{{ to_bool(measure.type_legal) }}</type_legal>
                        <type_administrative>{{ to_bool(measure.type_administrative) }}</type_administrative>
                        <type_contractual>{{ to_bool(measure.type_contractual) }}</type_contractual>
                        <type_recurrent>{{ to_bool(measure.type_recurrent) }}</type_recurrent>
                        <type_oneoff>{{ to_bool(measure.type_oneoff) }}</type_oneoff>
                        <ranking>{{ measure.rankingcode }}</ranking>
                        <location_inside>{{ to_bool(measure.location_inside) }}</location_inside>
                        <location_outside>{{ to_bool(measure.location_outside) }}</location_outside>
                        <location_both>{{ to_bool(measure.location_both) }}</location_both>
                        <broad_evaluation_maintain>{{ to_bool(measure.broad_evaluation_maintain) }}</broad_evaluation_maintain>
                        <broad_evaluation_enhance>{{ to_bool(measure.broad_evaluation_enhance) }}</broad_evaluation_enhance>
                        <broad_evaluation_longterm>{{ to_bool(measure.broad_evaluation_longterm) }}</broad_evaluation_longterm>
                        <broad_evaluation_noeffect>{{ to_bool(measure.broad_evaluation_noeffect) }}</broad_evaluation_noeffect>
                        <broad_evaluation_unknown>{{ to_bool(measure.broad_evaluation_unknown) }}</broad_evaluation_unknown>
                        <broad_evaluation_notevaluated>{{ to_bool(measure.broad_evaluation_notevaluat_18) }}</broad_evaluation_notevaluated>
                    </measure>
                {%- endfor %}
                </measures>
            </region>
        {%- endfor %}
        </regional>
    </species_report>
    {%- endfor %}
</species_reports>
