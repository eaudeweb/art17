{% extends "common/indexpage.html" %}


{% block breadcrumbs %}
  {%- from 'bits.html' import breadcrumbs %}
  {{ breadcrumbs([
          ('acasǎ', url_for('views.home')),
          ('habitate', None),
      ]) }}
{% endblock breadcrumbs %}


{% block form %}
  <form class="habitatfilter form-inline">
    <fieldset>
      <legend>Filtrare habitate</legend>

      <div class="form-group">
        <label for="habitatfilter-group">Habitat</label>
        <input name="habitat" value="{{ current_subject_code or '' }}"
               type="hidden" id="habitatfilter-group">
      </div>

      <div class="form-group">
        <label for="habitatfilter-region">Bioregiuni</label>
        <input name="region" value="{{ current_region_code }}"
               type="hidden" id="habitatfilter-region">
      </div>

      <div class="form-group">
        <button type="submit" class="btn btn-sm btn-primary">filtrează</button>
        {%- if map_url %}
          <a class="showmap btn btn-sm btn-info"
             href="{{ map_url }}">vezi harta</a>
        {%- endif %}
        <a class="helpbox-button btn btn-sm btn-default"
           href="#">ajutor</a>
      </div>
    </fieldset>
  </form>
{% endblock form %}


{% block subject_details %}
  <p class="subject-details">
    <strong>{{ name }}</strong>,
    cod: {{ code }}
  </p>
{% endblock subject_details %}


{% block records_header %}
  {%- from 'habitat/topic.html' import assessment_header with context %}
  {{ assessment_header() }}
{%- endblock records_header %}


{% block comments_header %}
  {%- from 'habitat/topic.html' import comments_header with context %}
  {{ comments_header() }}
{% endblock comments_header %}


{% block record_cell %}
  {%- from 'habitat/topic.html' import record with context %}
  {{ record(row) }}
{%- endblock %}


{% block script %}
  {{- super() }}

  <script>
    (function() {
      "use strict";
      var habitat_list = {{ subject_list|tojson|safe }};
      App.habitat_filter(habitat_list);
    })();
  </script>
{% endblock script %}
