{% extends "layout.html" %}

{% from 'dashboard/common.html' import table with context %}
{% from 'aggregation/common.html' import cell with context %}
{% from 'aggregation/reports/_bits.html' import report_table with context %}

{% block title %}Raport set de date &mdash; {{ super() }}{% endblock title %}

{% block breadcrumbs %}
  {%- from 'bits.html' import breadcrumbs %}
  {{ breadcrumbs([
          ('agregare', home_url),
          ('set de date', url_for('.dashboard', dataset_id=dataset.id)),
          ('rapoarte', none),
      ]) }}
{% endblock breadcrumbs %}

{% block content %}
  <ul class="nav nav-tabs">
    <li {% if not page %}class="active"{% endif %}>
      <a href="{{ url_for('.report', dataset_id=dataset.id) }}">Overview</a>
    </li>
    <li {% if page == 'missing' %}class="active"{% endif %}>
      <a href="{{ url_for('.report_missing', dataset_id=dataset.id) }}">
        Rapoarte vs Lista de verificare {# 10 #}</a></li>
    <li {% if page == 'conservation' %}class="active"{% endif %}>
      <a href="{{ url_for('.report_conservation_status', dataset_id=dataset.id) }}">
        Evaluare stare conservare {# 11 #}</a></li>
    <li {% if page == 'bioreg' %}class="active"{% endif %}>
      <a href="{{ url_for('.report_bioreg_global', dataset_id=dataset.id) }}">
        Evaluare globala bioregiuni</a></li>
    <li {% if page == 'bioreg_annex' %}class="active"{% endif %}>
      <a href="{{ url_for('.report_bioreg_annex', dataset_id=dataset.id) }}">
        Numar specii pe bioregiuni</a></li>
    <li {% if page == 'pressures1' %}class="active"{% endif %}>
      <a href="{{ url_for('.report_pressures1', dataset_id=dataset.id) }}">
        Frecvența Presiuni/Amenințări</a></li>
    <li {% if page == 'measures' %}class="active"{% endif %}>
      <a href="{{ url_for('.report_measures_high_importance', dataset_id=dataset.id) }}">
        Măsuri importanță mare</a></li>
    <li {% if page == 'measures_effects' %}class="active"{% endif %}>
      <a href="{{ url_for('.report_measures_effects', dataset_id=dataset.id) }}">
        Efecte măsuri</a></li>
  </ul>

  {% block pagecontent %}
    <h2>Rapoarte set #{{ dataset.id }}</h2>
    <p class="lead">{{ dataset.user_id }} {{ dataset.date }}, {{ dataset.comment }}</p>

    <h3>Evaluarea stării de conservare</h3>

    <h4>Specii</h4>
    {{ report_table(dataset.reports.species) }}
    <p>Numărul de specii în
      checklist: {{ dataset.reports.species.get('total_species') }} </p>
    <p>Numărul total de rapoarte în
      checklist: {{ dataset.reports.species.get('total_reports') }}</p>
    <p>Numărul de rapoarte agregate (noi): {{ dataset.details.species_new }}</p>
    <p>Numărul de rapoarte în lucru: {{ dataset.details.species_draft }}</p>
    <p>Numărul de rapoarte finalizate: {{ dataset.details.species_final }}</p>
    <p>{{ dataset.reports.missing.missing_species.count() }} <strong>specii
      lipsă</strong></p>

{#    {{ table(dataset.reports.missing.bioreg_list,#}
{#           dataset.reports.missing.species_list,#}
{#           cell,#}
{#           dataset.reports.missing.species_regions) }}#}

    <h4>Habitate</h4>
    {{ report_table(dataset.reports.habitat) }}
    <p>Numărul de habitate în
      checklist: {{ dataset.reports.habitat.get('total_habitats') }} </p>
    <p>Numărul total de rapoarte în
      checklist: {{ dataset.reports.habitat.get('total_reports') }}</p>
    <p>Numărul de rapoarte agregate (noi): {{ dataset.details.habitat_new }}</p>
    <p>Numărul de rapoarte în lucru: {{ dataset.details.habitat_draft }}</p>
    <p>Numărul de rapoarte finalizate: {{ dataset.details.habitat_final }}</p>
    <p>{{ dataset.reports.missing.missing_habitats.count() }} <strong>habitate
      lipsă</strong></p>

{#    {{ table(dataset.reports.missing.bioreg_list,#}
{#           dataset.reports.missing.habitat_list,#}
{#           cell,#}
{#           dataset.reports.missing.habitat_regions) }}#}

  {% endblock pagecontent %}
{% endblock content %}
