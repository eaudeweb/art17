{% extends "layout.html" %}

{% from 'dashboard/common.html' import table with context %}
{% from 'aggregation/common.html' import cell with context %}
{% from 'aggregation/reports/_bits.html' import report_table, report_menu with context %}

{% block title %}Raport set de date &mdash; {{ super() }}{% endblock title %}

{% block breadcrumbs %}
  {%- from 'bits.html' import breadcrumbs %}
  {{ breadcrumbs([
          ('agregare', home_url),
          ('set de date', url_for('.dashboard', dataset_id=dataset.id)),
          ('rapoarte', none),
      ]) }}
{% endblock breadcrumbs %}

{% block content %}

  <div class="well" style="width: 350px; float: right">
    <p>Rapoarte disponibile</p>
    <ul class="nav nav-pills nav-stacked">
      {{ report_menu() }}
    </ul>
  </div>
  <h2>Rapoarte set de date: {{ dataset.id }}</h2>

  <p class="lead">Creat
    de {{ dataset.user_id }} {{ dataset.date }}, {{ dataset.comment }}</p>

  <h3>Evaluarea stării de conservare</h3>

  <h4>Specii</h4>
  {{ report_table(dataset.reports.species) }}
  <p>Numărul de specii în
    checklist: {{ dataset.reports.species.get('total_species') }} </p>

  <p>Numărul total de rapoarte în
    checklist: {{ dataset.reports.species.get('total_reports') }}</p>

  <p>Numărul de rapoarte agregate
    (noi): {{ dataset.details.species_new }}</p>

  <p>Numărul de rapoarte în
    lucru: {{ dataset.details.species_draft }}</p>

  <p>Numărul de rapoarte
    finalizate: {{ dataset.details.species_final }}</p>

  <p>{{ dataset.reports.missing.missing_species.count() }} <strong>specii
    lipsă</strong></p>

  {#    {{ table(dataset.reports.missing.bioreg_list,#}
  {#           dataset.reports.missing.species_list,#}
  {#           cell,#}
  {#           dataset.reports.missing.species_regions) }}#}

  <h4>Habitate</h4>
  {{ report_table(dataset.reports.habitat) }}
  <p>Numărul de habitate în
    checklist: {{ dataset.reports.habitat.get('total_habitats') }} </p>

  <p>Numărul total de rapoarte în
    checklist: {{ dataset.reports.habitat.get('total_reports') }}</p>

  <p>Numărul de rapoarte agregate
    (noi): {{ dataset.details.habitat_new }}</p>

  <p>Numărul de rapoarte în
    lucru: {{ dataset.details.habitat_draft }}</p>

  <p>Numărul de rapoarte
    finalizate: {{ dataset.details.habitat_final }}</p>

  <p>{{ dataset.reports.missing.missing_habitats.count() }} <strong>habitate
    lipsă</strong></p>

  {#    {{ table(dataset.reports.missing.bioreg_list,#}
  {#           dataset.reports.missing.habitat_list,#}
  {#           cell,#}
  {#           dataset.reports.missing.habitat_regions) }}#}

{% endblock content %}
