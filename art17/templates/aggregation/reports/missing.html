{% extends 'aggregation/reports/report_base.html' %}
{% from 'bits.html' import script %}

{% block pagecontent %}

  <h3>Număr de rapoarte încărcate în raport cu lista de verificare</h3>
  <p>Numărul de rapoarte încărcate (rapoarte xml) în raport cu lista de
  verificare (rapoarte în plus, rapoarte în minus) cu evidențierea bioregiunii
  în care a fost sau nu a fost încărcat raportul.</p>

  <ul class="nav nav-tabs">
    <li class="active">
      <a href="#missing-species" data-toggle="tab">Specii</a>
    </li>
    <li>
      <a href="#missing-habitat" data-toggle="tab">Habitate</a>
    </li>
  </ul>

  <div class="tab-content">
    <div class="tab-pane active" id="missing-species">
      <table class="table table-bordered table-condensed" id="filter-table-1">
        <thead>
        <tr>
          <th>Nume</th>
          <th>Cod</th>
          <th>Prioritar</th>
          <th>Grup Specie</th>
          <th>Anexa DH</th>
          <th>Bioregiune</th>
        </tr>
        </thead>
        <tfoot class="thead">
        <tr>
          <th class="searchable"></th>
          <th></th>
          <th class="searchable"></th>
          <th class="searchable"></th>
          <th class="searchable"></th>
        </tr>
        </tfoot>
        <thead>
        <tr>
          <th colspan="5" class="text-center">Rapoarte în plus față de lista de verificare</th>
        </tr>
        <tr>
          <td colspan="5" class="text-center">Nu există rapoarte în plus față de lista de verificare.</td>
        </tr>
        </thead>
        <thead>
        <tr>
          <th colspan="5" class="text-center">Rapoarte în minus față de lista de verificare</th>
        </tr>
        </thead>
        {% if not missing_species.count() %}
        <thead>
        <tr>
          <td colspan="5" class="text-center">Nu există rapoarte în minus față de lista de verificare.</td>
        </tr>
        </thead>
        {% endif %}
        <tbody>
        {% for species in missing_species %}
          <tr>
            <td>{{ species.species.lu.speciesname }}</td>
            <td>{{ species.species.code }}</td>
            <td>{{ species.species.lu and
                   species.species.lu.data_checklist and
                   species.species.lu.data_checklist.priority }}</td>
            <td>{{ GROUPS.get(species.species.lu.group_code, species.species.lu.group_code) }}</td>
            <td>{{ species.species.lu.dh_list }}</td>
            <td>{{ species.region }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="tab-pane" id="missing-habitat">
      <table class="table table-bordered table-condensed" id="filter-table-2">
      <thead>
      <tr>
        <th>Cod</th>
        <th>Prioritar</th>
        <th>Habitat</th>
        <th>Bioregiune</th>
      </tr>
      </thead>
      <tfoot class="thead">
      <tr>
        <th></th>
        <th class="searchable"></th>
        <th class="searchable"></th>
      </tr>
      </tfoot>
      <thead>
        <tr>
          <th colspan="5" class="text-center">Rapoarte în plus față de lista de verificare</th>
        </tr>
        <tr>
          <td colspan="5" class="text-center">Nu există rapoarte în plus față de lista de verificare.</td>
        </tr>
      </thead>
      <thead>
        <tr>
          <th colspan="5" class="text-center">Rapoarte în minus față de lista de verificare</th>
        </tr>
      </thead>
        {% if not missing_habitats.count() %}
        <thead>
        <tr>
          <td colspan="5" class="text-center">Nu există rapoarte în minus față de lista de verificare.</td>
        </tr>
        </thead>
        {% endif %}
        <tbody>
        {% for habitat in missing_habitats %}
          <tr>
          <td>{{ habitat.habitat.code }}</td>
          <td>{{ habitat.habitat.lu and
                 habitat.habitat.lu.data_checklist and
                 habitat.habitat.lu.data_checklist.priority }}</td>
          <td>{{ habitat.habitat and habitat.habitat.lu.name_ro }}</td>
          <td>{{ habitat.region }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

{% endblock %}

{% block script %}
{{ super() }}
{{ script('datatables_filter.js') }}
<script>
  $(function () {
    enable_filtering('#filter-table-1');
    enable_filtering('#filter-table-2');
  });
</script>
{% endblock script %}
